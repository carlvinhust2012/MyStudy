    Client(lib3fs)  mgmtd(master)  metad(any)  storaged-0  storaged-1  storaged-2
         |              |              |            |            |            |
         | 1. write()/fwrite()         |            |            |            |
         |---------------------------->|            |            |            |
         | 2. 获取文件句柄&路由版本       |            |            |            |
         |<----------------------------|            |            |            |
         | 3. 写请求(chunk0)            |            |            |            |
         |----------------------------------------->|            |            |
         | 4. 本地持久化(WAL)                         |            |            |
         |<-----------------------------------------|            |            |
         | 5. 链式复制(CRAQ)                                      |            |
         |------------------------------------------------------>|            |
         | 6. 链式复制                                            |----------->|
         |------------------------------------------------------------------->|
         | 7. 回写 ACK(majority=2)                                |            |
         |<------------------------------------------------------|            |
         | 8. 返回用户态成功                                        |            |
         |<------------------------------------------|           |            |
         |              ...时间流逝...                            |            |
         | 9. read()/fread()                        |            |            |
         |------------------------------------------------------>|            |
         |10. 本地命中缓存(热数据)                                  |            |
         |<------------------------------------------------------|            |
         |11. 返回数据                                             |            |
         |<------------------------------------------|           |            |

步骤说明（对照序号）
1）业务进程调用 write()，lib3fs 先拿 文件句柄 + 路由表版本号（缓存 30 s）。
2）若缓存失效，向 mgmtd master 拉取最新 chunk→storaged 列表（一致性哈希）。
3）Client 把写请求直接 RDMA 发到主副本 storaged-0（零拷贝）。
4）storaged-0 先写本地 WAL，立即给 client 返回 “已接收”（不等待复制）。
5-6. 后台 CRAQ 链式复制：0→1→2，顺序写，保证 顺序一致性。
5）当 多数派（默认 2/3） 落盘成功后，storaged-0 汇总 ACK 并回给 client。
6）Client 收到 ACK，内核返回 write() 成功；此时数据已 持久化冗余。
7）后续 读请求 同样通过一致性哈希定位到 storaged-0。
8）若数据仍在 内存 PageCache（3FS 默认 1 GB 热区），直接 零拷贝 RDMA 返回。
9）Client 把数据拷到用户缓冲区，read() 返回，一次读写闭环完成。
